#  会议室预定系统

  该系统主要是应用于会议室的使用人员管理、会议室预约信息管理和会议室信息管理等，以提高各类企业和单位对于会议室的使用和管理效率。在线学习具有大多数数据库应用系统的特征，包含了教材中所涉及的大多数SQL Server数据库对象。在进行课程设计时，应尽可能使用SQL Server的功能完成下列功能设计的各项操作。

##  1、系统功能

1）权限管理：系统包含三类不同的用户，一是管理员，二是维修员，三是普通用户，每个用户都属于某个部门。维修员主要是接取用户的报修任务，普通用户主要是预约会议，而管理员主要是管理系统信息。

2）会议管理：

**管理员**拥有最高权限，可以对所有的会议信息进行管理，会议包含会议名称、内容、时间、主持人等信息，系统要记录参加这个会议的人员信息。**要修改会议信息的话，需会议尚未开始方可修改。**系统可通过会议名称、会议内容、会议室名称来进行查询。

**普通用户**提供查看自身会议、取消自己创建或者退出自己参加的会议功能。

3）会议室预约管理：每个会议必须在指定的会议室召开，会议室具有不同的容量、名称、位置和等级。只有正常的会议室才能用来作为会场，损坏的会议室是不能作为会场的，用户只能预定正常的会议室。系统需要记录会议室损坏和修复的相关时间信息。

4）设备管理：每个会议室都有许多的设备，比如电脑、投影仪、桌椅、音响等，系统要记录这些设备的相关信息，包括设备名称、采购时间、维修保养记录，设备状态等信息。

5）报修管理：会议室会因为设备的损坏而不能正常使用，所以等设备发生故障的时候需要进行报修，系统需要记录报修的时间、维修人员的信息，维修的情况等信息。

6）日志管理：系统会对用户的操作进行记录，以便了解用户的使用情况。

## 2． 数据库设计要求

（1）需求分析，可以在上述信息的基础上适当删减或扩充一些基本信息需求。 

（2）根据设计结果，采用crow-foot模型（乌鸦脚模型）画出系统的总体ER图。（可用Visio 、Lucidchart 、Rose 、PowerDesigner 等工具来画）

（3）数据库逻辑设计，根据需要创建若干视图，在设计过程中注意数据库的完整性设计，包括： 

1） 给每个表实施主键及外键约束。 

2） 设定缺省约束。如学生性别。 

3） 设置非空约束。如学生姓名非空。 

4） 实施CHECK约束，如会议的开始时间不能晚于结束时间。 

5） 实施规则，如参与会议的人数不能大于会议室的容量等。 

（4）数据库物理设计：为表创建适当索引 

（5）创建一个导出脚本（.sql）来创建所有数据库结构的备份，包括创建表定义和数据

## 3.数据库对象的设计 

为充分发挥数据库的效能，保证数据库的安全性，提高数据库管理系统的执行效率，可以考虑使用视图、存储过程及触发器来实现某些功能。

（1）   请根据系统的功能，创建一个视图、一个存储过程、一个触发器。

 做如下查询，写出相应的SQL: 

（2）查询某个会议室在2022年1月份段时间的使用情况。

（3）查询2021年每个会议室的报修次数。 

（4）查询报修次数比所有会议室平均报修次数还要多的会议室的相关信息。 



注：要求查询结果必须包含5-10行，查询结果的数据应合乎逻辑。